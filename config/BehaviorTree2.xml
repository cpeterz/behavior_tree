<?xml version="1.0"?>
<root BTCPP_format="4">
    <!-- ////////// -->
    <BehaviorTree ID="MainTree">
        <Sequence>
            <Action ID="DataReadNode" armor_distance="{armor_distance}" armor_number="{armor_number}" armor_timestamp="{armor_timestamp}" bullet_num="{bullet_num}" game_timestamp="{game_timestamp}" manual_top="{manual_top}" name="dataread" navigation_back="{navigation_back}" navigation_status="{navigation_status}" navigation_timestamp="{navigation_timestamp}" outpost_blood="{outpost_blood}" sentry_blood="{sentry_blood}" time_left="{time_left}"/>
            <Fallback>
                <Repeat num_cycles="2">
                    <Sequence name="Main_Sequence">
                        <WhileDoElse name="Top_Choose">
                            <Condition ID="Top_Condition" manual_top="{manual_top}" outpost_blood="{outpost_blood}"/>
                            <Action ID="Top_on_Node" top_status="{top_status}"/>
                            <Action ID="Top_off_Node" top_status="{top_status}"/>
                        </WhileDoElse>
                        <WhileDoElse name="Pose_Choose">
                            <Condition ID="Pose_Condition" top_status="{top_status}"/>
                            <Sequence name="Defend_Sequence">
                                <WhileDoElse name="Navigation_Choose">
                                    <Condition ID="Defend_Main_Condition" armor_distance="{armor_distance}" armor_number="{armor_number}" bullet_num="{bullet_num}" bullet_rate="{bullet_rate}" navigation_status="{navigation_status}" outpost_blood="{outpost_blood}" sentry_blood="{sentry_blood}" time_left="{time_left}"/>
                                    <Sequence name="Navigation_on_Sequence">
                                        <Action ID="Navigation_on_Node" navigation_back="{navigation_back}"/>
                                        <Action ID="Scan_off_Node"/>
                                        <Action ID="No_Shoot_Node"/>
                                    </Sequence>
                                    <Sequence name="Navigation_off_Sequence">
                                        <Action ID="Navigation_off_Node"/>
                                        <WhileDoElse name="Scan_Choose">
                                            <Condition ID="Scan_Condition" armor_distance="{armor_distance}" armor_number="{armor_number}"/>
                                            <Sequence name="Scan_on_Sequence">
                                                <Action ID="Scan_on_Node"/>
                                                <Action ID="No_Shoot_Node"/>
                                            </Sequence>
                                            <Sequence name="Scan_off_Sequence">
                                                <Action ID="No_Limit_Shoot_Node"/>
                                                <Action ID="Scan_off_Node"/>
                                            </Sequence>
                                        </WhileDoElse>
                                    </Sequence>
                                </WhileDoElse>
                            </Sequence>
                            <Sequence name="Attack_Sequence">
                                <WhileDoElse name="Shoot_Choose">
                                    <Condition ID="Attack_Main_Condition" armor_distance="{armor_distance}" armor_number="{armor_number}" bullet_num="{bullet_num}" bullet_rate="{bullet_rate}" navigation_status="{navigation_status}" outpost_blood="{outpost_blood}" time_left="{time_left}"/>
                                    <Sequence name="Shoot_on_Sequence">
                                        <Action ID="Limit_Shoot_Node" bullet_rate="{bullet_rate}"/>
                                        <Action ID="Navigation_off_Node"/>
                                        <Action ID="Scan_off_Node"/>
                                    </Sequence>
                                    <Sequence name="Shoot_off_Sequence">
                                        <Action ID="No_Shoot_Node"/>
                                        <WhileDoElse>
                                            <Condition ID="Navigation_Condition" navigation_status="{navigation_status}"/>
                                            <Sequence name="Navigation_on_Sequence">
                                                <Action ID="Navigation_on_Node" navigation_back="{navigation_back}"/>
                                                <Action ID="Scan_off_Node"/>
                                            </Sequence>
                                            <Sequence name="Navigation_off_Node">
                                                <Action ID="Navigation_off_Node"/>
                                                <Action ID="Scan_on_Node"/>
                                            </Sequence>
                                        </WhileDoElse>
                                    </Sequence>
                                </WhileDoElse>
                            </Sequence>
                        </WhileDoElse>
                    </Sequence>
                </Repeat>
                <ForceSuccess>
                    <Sequence name="Default_Sequence">
                        <Action ID="Scan_off_Node"/>
                        <Action ID="Top_on_Node" top_status="{top_status}"/>
                        <WhileDoElse name="Back_Choose">
                            <Condition ID="Back_Condition" armor_distance="{armor_distance}" armor_number="{armor_number}"/>
                            <Sequence name="Navigation_Back_Sequence">
                                <Action ID="Navigation_on_Node" navigation_back="{navigation_back}"/>
                                <Action ID="No_Shoot_Node"/>
                            </Sequence>
                            <Sequence name="Shoot_Sequence">
                                <Action ID="No_Limit_Shoot_Node"/>
                                <Action ID="Navigation_off_Node"/>
                            </Sequence>
                        </WhileDoElse>
                    </Sequence>
                </ForceSuccess>
            </Fallback>
        </Sequence>
    </BehaviorTree>
    <!-- ////////// -->
    <TreeNodesModel>
        <Condition ID="Attack_Main_Condition">
            <input_port default="armor_distance" name="armor_distance"/>
            <input_port default="armor_number" name="armor_number"/>
            <input_port default="bullet_num" name="bullet_num"/>
            <output_port default="bullet_rate" name="bullet_rate"/>
            <input_port default="navigation_status" name="navigation_status"/>
            <input_port default="outpost_blood" name="outpost_blood"/>
            <input_port default="time_left" name="time_left"/>
        </Condition>
        <Condition ID="Back_Condition">
            <input_port name="armor_distance"/>
            <input_port name="armor_number"/>
        </Condition>
        <Action ID="DataReadNode">
            <input_port name="armor_distance"/>
            <input_port name="armor_number"/>
            <input_port name="armor_timestamp"/>
            <input_port name="bullet_num"/>
            <input_port name="game_timestamp"/>
            <input_port name="manual_top"/>
            <output_port name="navigation_back"/>
            <input_port name="navigation_status"/>
            <input_port name="navigation_timestamp"/>
            <input_port name="outpost_blood"/>
            <input_port name="sentry_blood"/>
            <input_port name="time_left"/>
        </Action>
        <Condition ID="Defend_Main_Condition">
            <input_port name="armor_distance"/>
            <input_port name="armor_number"/>
            <input_port name="bullet_num"/>
            <output_port name="bullet_rate"/>
            <input_port name="navigation_status"/>
            <input_port name="outpost_blood"/>
            <input_port name="sentry_blood"/>
            <input_port name="time_left"/>
        </Condition>
        <Control ID="Detect_Condition">
            <input_port name="armor_distance"/>
            <input_port name="armor_number"/>
            <output_port name="bullet_num"/>
            <input_port name="bullet_rate"/>
            <input_port name="navigation_status"/>
            <input_port name="outpost_blood"/>
            <input_port name="sentry_blood"/>
            <input_port name="time_left"/>
            <input_port name="top_status"/>
        </Control>
        <Action ID="Limit_Shoot_Node">
            <input_port name="bullet_rate"/>
        </Action>
        <Condition ID="Navigation_Condition">
            <input_port name="navigation_status"/>
        </Condition>
        <Action ID="Navigation_back_Node"/>
        <Action ID="Navigation_off_Node"/>
        <Action ID="Navigation_on_Node">
            <input_port name="navigation_back"/>
        </Action>
        <Action ID="No_Limit_Shoot_Node"/>
        <Action ID="No_Shoot_Node"/>
        <Condition ID="Pose_Condition">
            <input_port name="top_status"/>
        </Condition>
        <Condition ID="Scan_Condition">
            <input_port default="armor_distance" name="armor_distance"/>
            <input_port default="armor_number" name="armor_number"/>
        </Condition>
        <Action ID="Scan_off_Node"/>
        <Action ID="Scan_on_Node"/>
        <Condition ID="Shoot_Condition">
            <input_port name="armor_number"/>
        </Condition>
        <Condition ID="Top_Condition">
            <input_port name="manual_top"/>
            <input_port name="outpost_blood"/>
        </Condition>
        <Action ID="Top_off_Node">
            <output_port name="top_status"/>
        </Action>
        <Action ID="Top_on_Node">
            <output_port name="top_status"/>
        </Action>
    </TreeNodesModel>
    <!-- ////////// -->
</root>
